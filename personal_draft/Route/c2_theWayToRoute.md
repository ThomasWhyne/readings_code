- 实现路由的方法：  
javascript应用里，实现路由的方法有两种：   
1、利用基于hash的URI，这些URI以#字符开头，是常见的方法；  
2、利用浏览器的history API生成更多传统的URI，即web应用上常见的URI。  
  
#### hash URI  
URI里的hash部分原本为指向文档里的特定位置而设计，因此浏览器hi查找#字符左边的所有内容，将这部分信息发送到后端，请求一些页面内容，只有当页面到达浏览器，并完成渲染后，#字符右边的内容才有意义。  
  
此时浏览器会在页面内根据URI的hash部分定位本地页面的相关位置。  
 
在javascript中使用hash实现路由及改变URI时，通常只有hash部分会被改变。这意味这浏览器事件会被触发，从而让代码知道URI已经改变，但其并不会自动向后端请求新的页面内容，这是关键的地方。  
  
#### 传统URI  
hash方法像是一种hack方法，SEO时也会遇到问题。得益于现代浏览器对history API的增强，传统URI实现路由在所有现代浏览器里都能实现。  
  
本质上，路由机制可以监听那些被推进history栈中的状态，当状态改变时，其会阻止请求发向后端，直接在本地相应状态变化。  
  
这种方式需要书写更多代码才能实现。而且极端的情况是服务端需要相应任何用户可能输入的有效URI，针对这种情况可以在服务端重写规则，将404错误重定向到应用首页，从而交给真正的路由程序处理。  
  
大部分javascript应用框架中的路由组件都封装了这两种方法。  
  
### 路由是如何工作的  
#### 路由的职责  
可以简单地把路由理解成为一张映射表，其将一些路径、字符串、以及正则表达式的定义映射到回调函数。但这个映射过程一定要足够快、容易预测、足够稳定。  
一些常见的路由职责：  
>- 存储从路由模式到对应事件名的映射    
> - 监听URI change事件--hash change 或 pop state
>- 查找路由模式，将新的URI与每个映射模式比较    
>- 匹配成功时，根据匹配的模式解析新的URI  
> - 触发事件路由，传递解析数据    

*路由查找需要线性查找映射表，最终获得匹配结果。加入定义了很多路由，可能会严重影响性能。如果使用对象数组来表示路由映射，路由性能可能会不稳定。例如，某一个路由在数组的最末，匹配要直到最后才成功。  
当匹配频繁访问URI时，为避免性能问题，可以扩展路由组件，让其根据优先级属性对路由数组进行排序，或者用trie结构来避免线性查找。  
当URI变化时路由组件还需处理很多情况，需要了解一个路由的生命周期*  
  
 #### 路由事件  
 路由之间一旦找到URI匹配的路由模式，根据匹配模式解析了URI，就会触发路由事件，路由事件会存放在映射表中。URI里可能包含了变量，这些变量被解析后会作为参数传给路由事件的处理函数。  
   
路由事件提供了一个抽象层，即是不是路由组件也能触发路由事件。  
  
大部分框架都配置了路由组件，路由改变时不会触发路由事件，而是直接调用函数。 
  
#### URI的结构和模式  